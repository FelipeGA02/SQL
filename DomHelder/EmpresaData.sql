CREATE TABLE EMPREGADO
( PNOME VARCHAR(255) NOT NULL,
  MINICIAL CHAR(1),
  UNOME VARCHAR(255) NOT NULL,
  SSN INT,
  DATANASC DATETIME,
  ENDERECO VARCHAR(255) NOT NULL,
  SEXO CHAR(1) CHECK (SEXO = 'M' OR SEXO = 'F'),
  SALARIO FLOAT CHECK (SALARIO > 0) NOT NULL,
  SUPERSSN INT,
  DNO INT CHECK (DNO > 0)
  constraint PK_EMPREGADO PRIMARY KEY(SSN)
  constraint FK_EMPREGADO_SUPERSSN FOREIGN KEY (SUPERSSN) REFERENCES EMPREGADO (SSN)
)

CREATE TABLE DEPARTAMENTO
( DNOME VARCHAR(255) NOT NULL,
  DNUMERO INT CHECK( DNUMERO > 0),
  GERSSN INT,
  GERDATAINICIO DATETIME
  constraint PK_DEPARTAMENTO PRIMARY KEY(DNUMERO)
  constraint FK_DEPARTAMENTO_GERSSN FOREIGN KEY (GERSSN) REFERENCES EMPREGADO (SSN)
)

CREATE TABLE DEPTO_LOCALIZACOES
( DNUMERO INT,
  DLOCALIZACAO VARCHAR(255)
  constraint PK_DEPTO_LOCALIZACOES PRIMARY KEY(DNUMERO, DLOCALIZACAO)
  constraint FK_DEPTO_LOCALIZACOES_DNUMERO FOREIGN KEY (DNUMERO) REFERENCES DEPARTAMENTO (DNUMERO)
)

CREATE TABLE PROJETO
( PJNOME VARCHAR(255),
  PNUMERO INT,
  PLOCALIZACAO VARCHAR(255),
  DNUM INT
  constraint PK_PROJETO PRIMARY KEY(PNUMERO)
  constraint FK_PROJETO_DNUM FOREIGN KEY (DNUM) REFERENCES DEPARTAMENTO (DNUMERO)
)

CREATE TABLE TRABALHA_EM
( ESSN INT,
  PNO INT constraint FK_TRABALHA_EM_PNO FOREIGN KEY (PNO) REFERENCES PROJETO (PNUMERO),
  HORAS REAL
  constraint PK_TRABALHA_EM PRIMARY KEY(ESSN, PNO)
)

CREATE TABLE DEPENDENTE
( ESSN INT constraint FK_DEPENDENTE_ESSN FOREIGN KEY (ESSN) REFERENCES EMPREGADO (SSN),
  NOME_DEPENDENTE VARCHAR(255),
  SEXO CHAR(1) CHECK (SEXO = 'M' OR SEXO = 'F'),
  DATANASC DATETIME,
  PARENTESCO VARCHAR(255),
  constraint PK_DEPENDENTE PRIMARY KEY(ESSN, NOME_DEPENDENTE)
)

ALTER TABLE EMPREGADO
ADD constraint FK_EMPREGADO_DNO FOREIGN KEY (DNO) REFERENCES DEPARTAMENTO (DNUMERO)

INSERT INTO EMPREGADO (PNOME,MINICIAL,UNOME,SSN,DATANASC,ENDERECO,SEXO,SALARIO)
VALUES
('Joao','B','Silva',1234567,09/02/1965,'Rua das Flores, 751, Sao Paulo, SP','M',30000),
('Fernando','T','Wong',3334455,08/12/1955,'Rua da Lapa, 34, Sao Paulo, SP','M',40000),
('Alice','J','Zelaya',9998877,19/01/1968,'Rua Souza Lima, 35, Curitiba, PR','F',25000),
('Jennifer','S','Souza',9876543,20/06/1941,'Av. Arthur de Lima, 54, Santo Amaro, SP','F',43000),
('Ronaldo','K','Lima',6668844,15/09/1962,'Rua Reboucas, 65, Piracicaba, SP','M',38000),
('Joice','A','Leite',4534534,31/07/1972,'Av. Lucas Obes, 104, Sao Paulo, SP','F',25000),
('Andre','V','Pereira',9879879,29/03/1969,'Rua Timbira, 35, Sao Paulo, SP','M',25000),
('Jorge','E','Brito',8886655,10/11/1937,'Rua do Horto, 47, Sao Paulo, SP','M',55000);

INSERT INTO DEPARTAMENTO (DNOME,DNUMERO,GERSSN,GERDATAINICIO)
VALUES
('Pesquisa',5,3334455,22/05/1988),
('Adminstracao',4,9876543,01/01/1995),
('Matriz',1,8886655,19/06/1981);

INSERT INTO DEPTO_LOCALIZACOES (DNUMERO,DLOCALIZACAO)
VALUES
(1,'Sao Paulo'),
(4,'Maua'),
(5,'Santo Amaro'),
(5,'Itu'),
(5,'Sao Paulo');

INSERT INTO PROJETO (PJNOME,PNUMERO,PLOCALIZACAO,DNUM)
VALUES
('ProdutoX',1,'Santo Amaro',5),
('ProdutoY',2,'Itu',5),
('ProdutoZ',3,'Sao Paulo',5),
('Informatizacao',10,'Maua',4),
('Reorganizacao',20,'Sao Paulo',1),
('Novosbeneficios',30,'Maua',4);

INSERT INTO TRABALHA_EM (ESSN,PNO,HORAS)
VALUES
(1234567,1,32.5),
(1234567,2,7.5),
(6668844,3,40.0),
(4534534,1,20.0),
(4534534,2,20.0),
(3334455,2,10.0),
(3334455,3,10.0),
(3334455,10,10.0),
(3334455,20,10.0),
(9998877,30,30.0),
(9998877,10,10.0),
(9879879,10,35.0),
(9879879,30,5.0),
(9876543,30,20.0),
(9876543,20,15.0),
(8886655,20,NULL);

INSERT INTO DEPENDENTE (ESSN,NOME_DEPENDENTE,SEXO,DATANASC,PARENTESCO)
VALUES
(3334455,'Alicia','F',05/04/1986,'Filha'),
(3334455,'Tiago','M',25/10/1983,'Filho'),
(3334455,'Janaina','F',03/05/1958,'Esposa'),
(9876543,'Antonio','M',28/02/1942,'Marido'),
(1234567,'Michael','M',04/01/1988,'Filho'),
(1234567,'Alicia','F',30/12/1988,'Filha'),
(1234567,'Elizabeth','F',05/05/1967,'Esposa');

UPDATE EMPREGADO
SET SUPERSSN = 3334455, DNO = 5
WHERE SSN = 1234567

UPDATE EMPREGADO
SET SUPERSSN = 8886655, DNO = 5
WHERE SSN = 3334455

UPDATE EMPREGADO
SET SUPERSSN = 9876543, DNO = 4
WHERE SSN = 9998877

UPDATE EMPREGADO
SET SUPERSSN = 8886655, DNO = 4
WHERE SSN = 9876543

UPDATE EMPREGADO
SET SUPERSSN = 3334455, DNO = 5
WHERE SSN = 6668844

UPDATE EMPREGADO
SET SUPERSSN = 3334455, DNO = 5
WHERE SSN = 4534534

UPDATE EMPREGADO
SET SUPERSSN = 9876543, DNO = 4
WHERE SSN = 9879879

UPDATE EMPREGADO
SET SUPERSSN = NULL, DNO = 1
WHERE SSN = 8886655

SELECT * FROM EMPREGADO
SELECT * FROM DEPARTAMENTO
select * from DEPTO_LOCALIZACOES
SELECT * FROM PROJETO
SELECT * FROM TRABALHA_EM
SELECT * FROM DEPENDENTE


